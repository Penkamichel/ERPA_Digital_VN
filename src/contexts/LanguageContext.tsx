import { createContext, useContext, useState, useEffect, ReactNode } from 'react';

type Language = 'en' | 'ja' | 'vi';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const translations: Record<Language, Record<string, string>> = {
  en: {
    'home': 'Home',
    'plan': 'Plan',
    'activity': 'Activity',
    'settings': 'Settings',
    'dashboard': 'Dashboard',
    'budget_overview': 'Budget Overview',
    'total_budget': 'Total Budget',
    'used': 'Used',
    'remaining': 'Remaining',
    'fund_registration': 'Fund Registration',
    'ideas': 'Ideas',
    'meetings': 'Meetings',
    'plan_input': 'Plan Input',
    'fund_about': 'About Fund Registration',
    'fund_about_desc': 'At the beginning of each fiscal year, register the approved budget amount. This amount will be the basis for activity budget for the year.',
    'edit_fund_registration': 'Edit Fund Registration',
    'no_fund_registration': 'No fund registration yet',
    'fiscal_year': 'Fiscal Year',
    'approved_amount': 'Approved Amount',
    'fund_source': 'Fund Source',
    'payment_date': 'Payment Date',
    'payer_name': 'Payer Name',
    'recorded_by': 'Recorded By',
    'approved': 'Approved',
    'activity_list': 'Activity List',
    'reporting': 'Reporting',
    'submit_activity_log': 'Submit Activity Log',
    'upload_receipt': 'Upload Receipt',
    'recent_uploads': 'Recent Uploads',
    'verified': 'Verified',
    'pending': 'Pending',
    'final_report': 'Final Report',
    'download_final_report': 'Download Final Report PDF',
    'create_final_report': 'Create Final Report PDF',
    'language': 'Language',
    'select_language': 'Select Language',
    'english': 'English',
    'japanese': 'Japanese',
    'vietnamese': 'Vietnamese',
    'save': 'Save',
    'cancel': 'Cancel',
    'back': 'Back',
    'submit': 'Submit',
    'loading': 'Loading...',
    'receipt_registration': 'Receipt Registration',
    'activity_log_registration': 'Activity Log Registration',
    'activity_info': 'Activity Information',
    'target_activity': 'Target Activity',
    'activity_date': 'Activity Date',
    'location': 'Location',
    'work_description': 'Work Description / Activity Log',
    'receipt_invoice': 'Receipt / Invoice',
    'add_item': 'Add Item',
    'expense_category': 'Expense Category',
    'vendor_name': 'Vendor Name',
    'invoice_number': 'Invoice Number',
    'amount': 'Amount',
    'total_amount': 'Total Amount',
    'submission_info': 'Submission Information',
    'submitter': 'Submitter',
    'submission_date': 'Submission Date',
    'submitting': 'Submitting...',
    'register': 'Register',
    'success_message': 'âœ… Successfully registered!',
    'error_message': 'Registration error occurred',
    'select_activity': 'Please select an activity',
    'no_approved_activities': 'No approved activities',
    'photo_upload_note': 'ğŸ’¡ In the actual app, you can upload photos here',
    'cmb_only': 'This feature is only available for CMB members',
    'community_name': 'Ban Pho Village',
    'activities': 'Activities',
    'progress': 'Progress',
    'view_details': 'View Details',
    'completed': 'Completed',
    'budget': 'Budget',
    'no_activities': 'No activities for this year',
    'participants': 'Participants',
    'view_minutes': 'View Minutes',
    'scheduled': 'Scheduled',
  },
  ja: {
    'home': 'ãƒ›ãƒ¼ãƒ ',
    'plan': 'è¨ˆç”»',
    'activity': 'æ´»å‹•',
    'settings': 'è¨­å®š',
    'dashboard': 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
    'budget_overview': 'äºˆç®—æ¦‚è¦',
    'total_budget': 'å…¨ä½“äºˆç®—',
    'used': 'ä½¿ç”¨æ¸ˆã¿',
    'remaining': 'æ®‹é¡',
    'fund_registration': 'Fundç™»éŒ²',
    'ideas': 'ã‚¢ã‚¤ãƒ‡ã‚¢',
    'meetings': 'ä¼šè­°',
    'plan_input': 'è¨ˆç”»å…¥åŠ›',
    'fund_about': 'Fundç™»éŒ²ã«ã¤ã„ã¦',
    'fund_about_desc': 'å„å¹´åº¦ã®åˆã‚ã«ã€æ‰¿èªã•ã‚ŒãŸäºˆç®—é¡ã‚’ç™»éŒ²ã—ã¾ã™ã€‚ã“ã®é‡‘é¡ãŒã€ãã®å¹´ã®æ´»å‹•äºˆç®—ã®åŸºæº–ã¨ãªã‚Šã¾ã™ã€‚',
    'edit_fund_registration': 'Fundç™»éŒ²æƒ…å ±ã‚’ç·¨é›†',
    'no_fund_registration': 'ã¾ã Fundç™»éŒ²ãŒã‚ã‚Šã¾ã›ã‚“',
    'fiscal_year': 'å¹´åº¦',
    'approved_amount': 'æ‰¿èªé‡‘é¡',
    'fund_source': 'è³‡é‡‘æº',
    'payment_date': 'æ”¯æ‰•æ—¥',
    'payer_name': 'æ”¯æ‰•è€…',
    'recorded_by': 'ç™»éŒ²è€…',
    'approved': 'æ‰¿èªæ¸ˆã¿',
    'activity_list': 'æ´»å‹•ä¸€è¦§',
    'reporting': 'å ±å‘Šãƒ»è¨˜éŒ²',
    'submit_activity_log': 'æ´»å‹•è¨˜éŒ²ã‚’å…¥åŠ›',
    'upload_receipt': 'ãƒ¬ã‚·ãƒ¼ãƒˆãƒ»å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
    'recent_uploads': 'æœ€è¿‘ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
    'verified': 'ç¢ºèªæ¸ˆã¿',
    'pending': 'ç¢ºèªå¾…ã¡',
    'final_report': 'æœ€çµ‚å ±å‘Šæ›¸',
    'download_final_report': 'æœ€çµ‚å ±å‘Šæ›¸PDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',
    'create_final_report': 'æœ€çµ‚å ±å‘Šæ›¸PDFã‚’ä½œæˆ',
    'language': 'è¨€èª',
    'select_language': 'è¨€èªã‚’é¸æŠ',
    'english': 'è‹±èª',
    'japanese': 'æ—¥æœ¬èª',
    'vietnamese': 'ãƒ™ãƒˆãƒŠãƒ èª',
    'save': 'ä¿å­˜',
    'cancel': 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
    'back': 'æˆ»ã‚‹',
    'submit': 'ç™»éŒ²ã™ã‚‹',
    'loading': 'èª­ã¿è¾¼ã¿ä¸­...',
    'receipt_registration': 'ãƒ¬ã‚·ãƒ¼ãƒˆç™»éŒ²',
    'activity_log_registration': 'æ´»å‹•ãƒ­ã‚°ç™»éŒ²',
    'activity_info': 'æ´»å‹•æƒ…å ±',
    'target_activity': 'å¯¾è±¡æ´»å‹•',
    'activity_date': 'æ´»å‹•æ—¥',
    'location': 'å ´æ‰€',
    'work_description': 'ä½œæ¥­å†…å®¹ãƒ»æ´»å‹•ãƒ­ã‚°',
    'receipt_invoice': 'ãƒ¬ã‚·ãƒ¼ãƒˆãƒ»é ˜åæ›¸',
    'add_item': 'é …ç›®è¿½åŠ ',
    'expense_category': 'æ”¯å‡ºã‚«ãƒ†ã‚´ãƒªãƒ¼',
    'vendor_name': 'æ¥­è€…å',
    'invoice_number': 'é ˜åæ›¸ç•ªå·',
    'amount': 'é‡‘é¡',
    'total_amount': 'åˆè¨ˆé‡‘é¡',
    'submission_info': 'æå‡ºæƒ…å ±',
    'submitter': 'æå‡ºè€…',
    'submission_date': 'æå‡ºæ—¥',
    'submitting': 'ç™»éŒ²ä¸­...',
    'register': 'ç™»éŒ²ã™ã‚‹',
    'success_message': 'âœ… ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼',
    'error_message': 'ç™»éŒ²ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
    'select_activity': 'æ´»å‹•ã‚’é¸æŠã—ã¦ãã ã•ã„',
    'no_approved_activities': 'æ‰¿èªã•ã‚ŒãŸæ´»å‹•ãŒã‚ã‚Šã¾ã›ã‚“',
    'photo_upload_note': 'ğŸ’¡ å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§ã¯ã€ã“ã“ã§å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™',
    'cmb_only': 'ã“ã®æ©Ÿèƒ½ã¯CMBãƒ¡ãƒ³ãƒãƒ¼ã®ã¿åˆ©ç”¨ã§ãã¾ã™',
    'community_name': 'Ban Pho Village',
    'activities': 'æ´»å‹•',
    'progress': 'é€²æ—åº¦',
    'view_details': 'è©³ç´°ã‚’è¦‹ã‚‹',
    'completed': 'å®Œäº†',
    'budget': 'äºˆç®—',
    'no_activities': 'ã“ã®å¹´åº¦ã®æ´»å‹•ã¯ã‚ã‚Šã¾ã›ã‚“',
    'participants': 'å‚åŠ è€…',
    'view_minutes': 'è­°äº‹éŒ²ã‚’è¦‹ã‚‹',
    'scheduled': 'äºˆå®š',
  },
  vi: {
    'home': 'Trang chá»§',
    'plan': 'Káº¿ hoáº¡ch',
    'activity': 'Hoáº¡t Ä‘á»™ng',
    'settings': 'CÃ i Ä‘áº·t',
    'dashboard': 'Báº£ng Ä‘iá»u khiá»ƒn',
    'budget_overview': 'Tá»•ng quan ngÃ¢n sÃ¡ch',
    'total_budget': 'Tá»•ng ngÃ¢n sÃ¡ch',
    'used': 'ÄÃ£ sá»­ dá»¥ng',
    'remaining': 'CÃ²n láº¡i',
    'fund_registration': 'ÄÄƒng kÃ½ Quá»¹',
    'ideas': 'Ã tÆ°á»Ÿng',
    'meetings': 'Cuá»™c há»p',
    'plan_input': 'Nháº­p káº¿ hoáº¡ch',
    'fund_about': 'Vá» ÄÄƒng kÃ½ Quá»¹',
    'fund_about_desc': 'VÃ o Ä‘áº§u má»—i nÄƒm tÃ i chÃ­nh, Ä‘Äƒng kÃ½ sá»‘ tiá»n ngÃ¢n sÃ¡ch Ä‘Æ°á»£c phÃª duyá»‡t. Sá»‘ tiá»n nÃ y sáº½ lÃ  cÆ¡ sá»Ÿ cho ngÃ¢n sÃ¡ch hoáº¡t Ä‘á»™ng cá»§a nÄƒm.',
    'edit_fund_registration': 'Chá»‰nh sá»­a ÄÄƒng kÃ½ Quá»¹',
    'no_fund_registration': 'ChÆ°a cÃ³ Ä‘Äƒng kÃ½ quá»¹',
    'fiscal_year': 'NÄƒm tÃ i chÃ­nh',
    'approved_amount': 'Sá»‘ tiá»n Ä‘Æ°á»£c phÃª duyá»‡t',
    'fund_source': 'Nguá»“n quá»¹',
    'payment_date': 'NgÃ y thanh toÃ¡n',
    'payer_name': 'NgÆ°á»i thanh toÃ¡n',
    'recorded_by': 'ÄÆ°á»£c ghi bá»Ÿi',
    'approved': 'ÄÃ£ phÃª duyá»‡t',
    'activity_list': 'Danh sÃ¡ch hoáº¡t Ä‘á»™ng',
    'reporting': 'BÃ¡o cÃ¡o & Ghi chÃ©p',
    'submit_activity_log': 'Nháº­p nháº­t kÃ½ hoáº¡t Ä‘á»™ng',
    'upload_receipt': 'Táº£i lÃªn biÃªn lai & áº£nh',
    'recent_uploads': 'Táº£i lÃªn gáº§n Ä‘Ã¢y',
    'verified': 'ÄÃ£ xÃ¡c minh',
    'pending': 'Äang chá»',
    'final_report': 'BÃ¡o cÃ¡o cuá»‘i ká»³',
    'download_final_report': 'Táº£i xuá»‘ng BÃ¡o cÃ¡o cuá»‘i ká»³ PDF',
    'create_final_report': 'Táº¡o BÃ¡o cÃ¡o cuá»‘i ká»³ PDF',
    'language': 'NgÃ´n ngá»¯',
    'select_language': 'Chá»n ngÃ´n ngá»¯',
    'english': 'Tiáº¿ng Anh',
    'japanese': 'Tiáº¿ng Nháº­t',
    'vietnamese': 'Tiáº¿ng Viá»‡t',
    'save': 'LÆ°u',
    'cancel': 'Há»§y',
    'back': 'Quay láº¡i',
    'submit': 'ÄÄƒng kÃ½',
    'loading': 'Äang táº£i...',
    'receipt_registration': 'ÄÄƒng kÃ½ biÃªn lai',
    'activity_log_registration': 'ÄÄƒng kÃ½ nháº­t kÃ½ hoáº¡t Ä‘á»™ng',
    'activity_info': 'ThÃ´ng tin hoáº¡t Ä‘á»™ng',
    'target_activity': 'Hoáº¡t Ä‘á»™ng má»¥c tiÃªu',
    'activity_date': 'NgÃ y hoáº¡t Ä‘á»™ng',
    'location': 'Äá»‹a Ä‘iá»ƒm',
    'work_description': 'MÃ´ táº£ cÃ´ng viá»‡c / Nháº­t kÃ½ hoáº¡t Ä‘á»™ng',
    'receipt_invoice': 'BiÃªn lai / HÃ³a Ä‘Æ¡n',
    'add_item': 'ThÃªm má»¥c',
    'expense_category': 'Danh má»¥c chi phÃ­',
    'vendor_name': 'TÃªn nhÃ  cung cáº¥p',
    'invoice_number': 'Sá»‘ hÃ³a Ä‘Æ¡n',
    'amount': 'Sá»‘ tiá»n',
    'total_amount': 'Tá»•ng sá»‘ tiá»n',
    'submission_info': 'ThÃ´ng tin gá»­i',
    'submitter': 'NgÆ°á»i gá»­i',
    'submission_date': 'NgÃ y gá»­i',
    'submitting': 'Äang gá»­i...',
    'register': 'ÄÄƒng kÃ½',
    'success_message': 'âœ… ÄÄƒng kÃ½ thÃ nh cÃ´ng!',
    'error_message': 'ÄÃ£ xáº£y ra lá»—i Ä‘Äƒng kÃ½',
    'select_activity': 'Vui lÃ²ng chá»n hoáº¡t Ä‘á»™ng',
    'no_approved_activities': 'KhÃ´ng cÃ³ hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c phÃª duyá»‡t',
    'photo_upload_note': 'ğŸ’¡ Trong á»©ng dá»¥ng thá»±c táº¿, báº¡n cÃ³ thá»ƒ táº£i lÃªn áº£nh táº¡i Ä‘Ã¢y',
    'cmb_only': 'TÃ­nh nÄƒng nÃ y chá»‰ dÃ nh cho thÃ nh viÃªn CMB',
    'community_name': 'LÃ ng Ban Pho',
    'activities': 'Hoáº¡t Ä‘á»™ng',
    'progress': 'Tiáº¿n Ä‘á»™',
    'view_details': 'Xem chi tiáº¿t',
    'completed': 'HoÃ n thÃ nh',
    'budget': 'NgÃ¢n sÃ¡ch',
    'no_activities': 'KhÃ´ng cÃ³ hoáº¡t Ä‘á»™ng nÃ o trong nÄƒm nÃ y',
    'participants': 'NgÆ°á»i tham gia',
    'view_minutes': 'Xem biÃªn báº£n',
    'scheduled': 'ÄÃ£ lÃªn lá»‹ch',
  },
};

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>(() => {
    const saved = localStorage.getItem('language');
    return (saved as Language) || 'ja';
  });

  useEffect(() => {
    localStorage.setItem('language', language);
  }, [language]);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
  };

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within LanguageProvider');
  }
  return context;
}
